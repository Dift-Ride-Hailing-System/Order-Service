Interface ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà

‡πÉ‡∏ä‡πâ ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° Adapter/Producer/Consumer
‡πÄ‡∏ä‡πà‡∏ô

    PassengerCancelProducer ‚Üí PassengerCancelProducerPort

    DriverCancelConsumer ‚Üí DriverCancelConsumerPort

    TripHistoryProducer ‚Üí TripHistoryProducerPort

    OrderMatchingProducer ‚Üí OrderMatchingProducerPort

    MatchResultConsumer ‚Üí MatchResultConsumerPort
    ‡∏õ‡∏•. ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Core Logic/Service ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å Kafka/Redpanda ‡∏´‡∏£‡∏∑‡∏≠ gRPC ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

    ****************************************************************************************************************

‡πÑ‡∏ü‡∏•‡πå logic / service

‡∏à‡∏∞ import interface ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞ import Kafka/Redpanda/gRPC

Core ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ interface 

****************************************************************************************************

‡πÑ‡∏ü‡∏•‡πå Adapter / Producer / Consumer

‡∏à‡∏∞ import interface ‡πÄ‡∏û‡∏∑‡πà‡∏≠ implement interface ‡∏ô‡∏±‡πâ‡∏ô

‡∏à‡∏∞ import dto ‡πÅ‡∏•‡∏∞ model ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å/‡πÑ‡∏õ domain

Adapter ‡∏à‡∏∞ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ core.Producer() ‡∏´‡∏£‡∏∑‡∏≠ core.Consumer() ‡∏ú‡πà‡∏≤‡∏ô interface ‡∏Ç‡∏≠‡∏á broker
*********************************************************************************

‡πÑ‡∏ü‡∏•‡πå DTO

‡∏à‡∏∞ import model ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô/‡∏à‡∏≤‡∏Å domain

‡∏à‡∏∞ import pb ‡πÅ‡∏•‡∏∞ proto ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á marshal/unmarshal protobuf

‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á import Adapter, Core, Kafka, Redpanda, ‡∏´‡∏£‡∏∑‡∏≠ interface

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////


‡∏™‡∏£‡∏∏‡∏õ
Logic / Service ‚Üí import interface + model

Adapter / Producer / Consumer ‚Üí import interface + dto + model + logger

DTO ‚Üí import model + pb + proto

Interface ‚Üí ‡πÑ‡∏°‡πà import Kafka/Redpanda/gRPC ‡πÅ‡∏ï‡πà Adapter ‡∏à‡∏∞ implement


‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏ü‡∏•‡πå
‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å model
‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢ interface (port)
‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô implement interface (adapter / infra layer)
‡∏ï‡πà‡∏≠‡πÑ‡∏õ business logic / service / usecase

‚úÖ ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠ implement interface

model/*.go ‚Üí domain types

port/*.go ‚Üí interface / abstraction

adapter/kafka/*.go ‚Üí implement interface ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Kafka

service/core/*.go ‚Üí business logic ‡πÉ‡∏ä‡πâ interface ‡πÅ‡∏•‡∏∞ model


*****************
‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£ import ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå 
1Ô∏è‚É£ model

üëâ ‡πÑ‡∏°‡πà import ‡πÉ‡∏Ñ‡∏£

‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà time, stdlib


2Ô∏è‚É£ port (interface)

‚úÖ import model

‚ùå ‡πÑ‡∏°‡πà import adapter / dto / kafka / infra


3Ô∏è‚É£ dto

‚úÖ import model

‚ùå ‡πÑ‡∏°‡πà import port / adapter / infra

4Ô∏è‚É£ logic / flow / core

‚úÖ import model, port

‚ùå ‡πÑ‡∏°‡πà import adapter / dto / kafka / infra


5Ô∏è‚É£ adapter

‚úÖ import port (‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥)

‚úÖ import dto, model, flow/core

‚ùå ‡πÑ‡∏°‡πà import infra/kafka (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö consumer / producer logic)

Adapter = ‡πÅ‡∏Ñ‡πà‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• + ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å business


6Ô∏è‚É£ infra (kafka, grpc, db)

‚ùå ‡πÑ‡∏°‡πà import adapter / logic

‡πÉ‡∏ä‡πâ lib ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏•‡πâ‡∏ß‡∏ô


7Ô∏è‚É£ worker / main

‚úÖ import infra, adapter, service



üëâ ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà wire ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á

üîë ‡∏Å‡∏é‡∏ó‡∏≠‡∏á (‡∏à‡∏≥‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)

Adapter import port
Logic ‡πÉ‡∏ä‡πâ port
Kafka ‡∏≠‡∏¢‡∏π‡πà infra / worker ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô